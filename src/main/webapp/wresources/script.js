/*!
 * jQuery Form Plugin
 * version: 2.95 (30-JAN-2012)
 * @requires jQuery v1.3.2 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *	http://www.opensource.org/licenses/mit-license.php
 *	http://www.gnu.org/licenses/gpl.html
 */
(function(b){b.fn.ajaxSubmit=function(d){if(!this.length){a("ajaxSubmit: skipping submit process - no element selected");return this}var c,t,f,h=this;if(typeof d=="function"){d={success:d}}c=this.attr("method");t=this.attr("action");f=(typeof t==="string")?b.trim(t):"";f=f||window.location.href||"";if(f){f=(f.match(/^([^#]+)/)||[])[1]}d=b.extend(true,{url:f,success:b.ajaxSettings.success,type:c||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},d);var m={};this.trigger("form-pre-serialize",[this,d,m]);if(m.veto){a("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(d.beforeSerialize&&d.beforeSerialize(this,d)===false){a("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var g=d.traditional;if(g===undefined){g=b.ajaxSettings.traditional}var x,s,j,y=this.formToArray(d.semantic);if(d.data){d.extraData=d.data;x=b.param(d.data,g)}if(d.beforeSubmit&&d.beforeSubmit(y,this,d)===false){a("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[y,this,d,m]);if(m.veto){a("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var r=b.param(y,g);if(x){r=(r?(r+"&"+x):x)}if(d.type.toUpperCase()=="GET"){d.url+=(d.url.indexOf("?")>=0?"&":"?")+r;d.data=null}else{d.data=r}var A=[];if(d.resetForm){A.push(function(){h.resetForm()})}if(d.clearForm){A.push(function(){h.clearForm(d.includeHidden)})}if(!d.dataType&&d.target){var e=d.success||function(){};A.push(function(q){var n=d.replaceTarget?"replaceWith":"html";b(d.target)[n](q).each(e,arguments)})}else{if(d.success){A.push(d.success)}}d.success=function(C,q,D){var B=d.context||d;for(var v=0,n=A.length;v<n;v++){A[v].apply(B,[C,q,D||h,h])}};var w=b("input:file:enabled[value]",this);var i=w.length>0;var u="multipart/form-data";var p=(h.attr("enctype")==u||h.attr("encoding")==u);var o=!!(i&&w.get(0).files&&window.FormData);a("fileAPI :"+o);var k=(i||p)&&!o;if(d.iframe!==false&&(d.iframe||k)){if(d.closeKeepAlive){b.get(d.closeKeepAlive,function(){z(y)})}else{z(y)}}else{if((i||p)&&o){d.progress=d.progress||b.noop;l(y)}else{b.ajax(d)}}this.trigger("form-submit-notify",[this,d]);return this;function l(q){var n=new FormData();for(var B=0;B<q.length;B++){if(q[B].type=="file"){continue}n.append(q[B].name,q[B].value)}h.find("input:file:enabled").each(function(){var E=b(this).attr("name"),G=this.files;if(E){for(var F=0;F<G.length;F++){n.append(E,G[F])}}});if(d.extraData){for(var v in d.extraData){n.append(v,d.extraData[v])}}d.data=null;var D=b.extend(true,{},b.ajaxSettings,d,{contentType:false,processData:false,cache:false,type:"POST"});D.data=null;var C=D.beforeSend;D.beforeSend=function(F,E){E.data=n;if(F.upload){F.upload.onprogress=function(G){E.progress(G.position,G.total)}}if(C){C.call(E,F,d)}};b.ajax(D)}function z(Z){var E=h[0],D,V,P,X,S,G,K,I,J,T,W,N;var H=!!b.fn.prop;if(Z){if(H){for(V=0;V<Z.length;V++){D=b(E[Z[V].name]);D.prop("disabled",false)}}else{for(V=0;V<Z.length;V++){D=b(E[Z[V].name]);D.removeAttr("disabled")}}}if(b(":input[name=submit],:input[id=submit]",E).length){alert('Error: Form elements must not have name or id of "submit".');return}P=b.extend(true,{},b.ajaxSettings,d);P.context=P.context||P;S="jqFormIO"+(new Date().getTime());if(P.iframeTarget){G=b(P.iframeTarget);T=G.attr("name");if(T==null){G.attr("name",S)}else{S=T}}else{G=b('<iframe name="'+S+'" src="'+P.iframeSrc+'" />');G.css({position:"absolute",top:"-1000px",left:"-1000px"})}K=G[0];I={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(n){var ac=(n==="timeout"?"timeout":"aborted");a("aborting upload... "+ac);this.aborted=1;G.attr("src",P.iframeSrc);I.error=ac;P.error&&P.error.call(P.context,I,ac,n);X&&b.event.trigger("ajaxError",[I,P,ac]);P.complete&&P.complete.call(P.context,I,ac)}};X=P.global;if(X&&!b.active++){b.event.trigger("ajaxStart")}if(X){b.event.trigger("ajaxSend",[I,P])}if(P.beforeSend&&P.beforeSend.call(P.context,I,P)===false){if(P.global){b.active--}return}if(I.aborted){return}J=E.clk;if(J){T=J.name;if(T&&!J.disabled){P.extraData=P.extraData||{};P.extraData[T]=J.value;if(J.type=="image"){P.extraData[T+".x"]=E.clk_x;P.extraData[T+".y"]=E.clk_y}}}var O=1;var L=2;function M(ac){var n=ac.contentWindow?ac.contentWindow.document:ac.contentDocument?ac.contentDocument:ac.document;return n}var C=b("meta[name=csrf-token]").attr("content");var B=b("meta[name=csrf-param]").attr("content");if(B&&C){P.extraData=P.extraData||{};P.extraData[B]=C}function U(){var ae=h.attr("target"),ac=h.attr("action");E.setAttribute("target",S);if(!c){E.setAttribute("method","POST")}if(ac!=P.url){E.setAttribute("action",P.url)}if(!P.skipEncodingOverride&&(!c||/post/i.test(c))){h.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(P.timeout){N=setTimeout(function(){W=true;R(O)},P.timeout)}function af(){try{var n=M(K).readyState;a("state = "+n);if(n.toLowerCase()=="uninitialized"){setTimeout(af,50)}}catch(ah){a("Server abort: ",ah," (",ah.name,")");R(L);N&&clearTimeout(N);N=undefined}}var ad=[];try{if(P.extraData){for(var ag in P.extraData){ad.push(b('<input type="hidden" name="'+ag+'">').attr("value",P.extraData[ag]).appendTo(E)[0])}}if(!P.iframeTarget){G.appendTo("body");K.attachEvent?K.attachEvent("onload",R):K.addEventListener("load",R,false)}setTimeout(af,15);E.submit()}finally{E.setAttribute("action",ac);if(ae){E.setAttribute("target",ae)}else{h.removeAttr("target")}b(ad).remove()}}if(P.forceSync){U()}else{setTimeout(U,10)}var aa,ab,Y=50,F;function R(ag){if(I.aborted||F){return}try{ab=M(K)}catch(aj){a("cannot access response document: ",aj);ag=L}if(ag===O&&I){I.abort("timeout");return}else{if(ag==L&&I){I.abort("server abort");return}}if(!ab||ab.location.href==P.iframeSrc){if(!W){return}}K.detachEvent?K.detachEvent("onload",R):K.removeEventListener("load",R,false);var ae="success",ai;try{if(W){throw"timeout"}var ad=P.dataType=="xml"||ab.XMLDocument||b.isXMLDoc(ab);a("isXml="+ad);if(!ad&&window.opera&&(ab.body==null||ab.body.innerHTML=="")){if(--Y){a("requeing onLoad callback, DOM not available");setTimeout(R,250);return}}var ak=ab.body?ab.body:ab.documentElement;I.responseText=ak?ak.innerHTML:null;I.responseXML=ab.XMLDocument?ab.XMLDocument:ab;if(ad){P.dataType="xml"}I.getResponseHeader=function(an){var am={"content-type":P.dataType};return am[an]};if(ak){I.status=Number(ak.getAttribute("status"))||I.status;I.statusText=ak.getAttribute("statusText")||I.statusText}var n=(P.dataType||"").toLowerCase();var ah=/(json|script|text)/.test(n);if(ah||P.textarea){var af=ab.getElementsByTagName("textarea")[0];if(af){I.responseText=af.value;I.status=Number(af.getAttribute("status"))||I.status;I.statusText=af.getAttribute("statusText")||I.statusText}else{if(ah){var ac=ab.getElementsByTagName("pre")[0];var al=ab.getElementsByTagName("body")[0];if(ac){I.responseText=ac.textContent?ac.textContent:ac.innerText}else{if(al){I.responseText=al.textContent?al.textContent:al.innerText}}}}}else{if(n=="xml"&&!I.responseXML&&I.responseText!=null){I.responseXML=Q(I.responseText)}}try{aa=q(I,n,P)}catch(ag){ae="parsererror";I.error=ai=(ag||ae)}}catch(ag){a("error caught: ",ag);ae="error";I.error=ai=(ag||ae)}if(I.aborted){a("upload aborted");ae=null}if(I.status){ae=(I.status>=200&&I.status<300||I.status===304)?"success":"error"}if(ae==="success"){P.success&&P.success.call(P.context,aa,"success",I);X&&b.event.trigger("ajaxSuccess",[I,P])}else{if(ae){if(ai==undefined){ai=I.statusText}P.error&&P.error.call(P.context,I,ae,ai);X&&b.event.trigger("ajaxError",[I,P,ai])}}X&&b.event.trigger("ajaxComplete",[I,P]);if(X&&!--b.active){b.event.trigger("ajaxStop")}P.complete&&P.complete.call(P.context,I,ae);F=true;if(P.timeout){clearTimeout(N)}setTimeout(function(){if(!P.iframeTarget){G.remove()}I.responseXML=null},100)}var Q=b.parseXML||function(n,ac){if(window.ActiveXObject){ac=new ActiveXObject("Microsoft.XMLDOM");ac.async="false";ac.loadXML(n)}else{ac=(new DOMParser()).parseFromString(n,"text/xml")}return(ac&&ac.documentElement&&ac.documentElement.nodeName!="parsererror")?ac:null};var v=b.parseJSON||function(n){return window["eval"]("("+n+")")};var q=function(ag,ae,ad){var ac=ag.getResponseHeader("content-type")||"",n=ae==="xml"||!ae&&ac.indexOf("xml")>=0,af=n?ag.responseXML:ag.responseText;if(n&&af.documentElement.nodeName==="parsererror"){b.error&&b.error("parsererror")}if(ad&&ad.dataFilter){af=ad.dataFilter(af,ae)}if(typeof af==="string"){if(ae==="json"||!ae&&ac.indexOf("json")>=0){af=v(af)}else{if(ae==="script"||!ae&&ac.indexOf("javascript")>=0){b.globalEval(af)}}}return af}}};b.fn.ajaxForm=function(c){if(this.length===0){var d={s:this.selector,c:this.context};if(!b.isReady&&d.s){a("DOM not ready, queuing ajaxForm");b(function(){b(d.s,d.c).ajaxForm(c)});return this}a("terminating; zero elements found by selector"+(b.isReady?"":" (DOM not ready)"));return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(f){if(!f.isDefaultPrevented()){f.preventDefault();b(this).ajaxSubmit(c)}}).bind("click.form-plugin",function(j){var i=j.target;var g=b(i);if(!(g.is(":submit,input:image"))){var f=g.closest(":submit");if(f.length==0){return}i=f[0]}var h=this;h.clk=i;if(i.type=="image"){if(j.offsetX!=undefined){h.clk_x=j.offsetX;h.clk_y=j.offsetY}else{if(typeof b.fn.offset=="function"){var k=g.offset();h.clk_x=j.pageX-k.left;h.clk_y=j.pageY-k.top}else{h.clk_x=j.pageX-i.offsetLeft;h.clk_y=j.pageY-i.offsetTop}}}setTimeout(function(){h.clk=h.clk_x=h.clk_y=null},100)})};b.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};b.fn.formToArray=function(q){var p=[];if(this.length===0){return p}var d=this[0];var g=q?d.getElementsByTagName("*"):d.elements;if(!g){return p}var k,h,f,r,e,m,c;for(k=0,m=g.length;k<m;k++){e=g[k];f=e.name;if(!f){continue}if(q&&d.clk&&e.type=="image"){if(!e.disabled&&d.clk==e){p.push({name:f,value:b(e).val(),type:e.type});p.push({name:f+".x",value:d.clk_x},{name:f+".y",value:d.clk_y})}continue}r=b.fieldValue(e,true);if(r&&r.constructor==Array){for(h=0,c=r.length;h<c;h++){p.push({name:f,value:r[h]})}}else{if(r!==null&&typeof r!="undefined"){p.push({name:f,value:r,type:e.type})}}}if(!q&&d.clk){var l=b(d.clk),o=l[0];f=o.name;if(f&&!o.disabled&&o.type=="image"){p.push({name:f,value:l.val()});p.push({name:f+".x",value:d.clk_x},{name:f+".y",value:d.clk_y})}}return p};b.fn.formSerialize=function(c){return b.param(this.formToArray(c))};b.fn.fieldSerialize=function(d){var c=[];this.each(function(){var h=this.name;if(!h){return}var f=b.fieldValue(this,d);if(f&&f.constructor==Array){for(var g=0,e=f.length;g<e;g++){c.push({name:h,value:f[g]})}}else{if(f!==null&&typeof f!="undefined"){c.push({name:this.name,value:f})}}});return b.param(c)};b.fn.fieldValue=function(h){for(var g=[],e=0,c=this.length;e<c;e++){var f=this[e];var d=b.fieldValue(f,h);if(d===null||typeof d=="undefined"||(d.constructor==Array&&!d.length)){continue}d.constructor==Array?b.merge(g,d):g.push(d)}return g};b.fieldValue=function(c,j){var e=c.name,p=c.type,q=c.tagName.toLowerCase();if(j===undefined){j=true}if(j&&(!e||c.disabled||p=="reset"||p=="button"||(p=="checkbox"||p=="radio")&&!c.checked||(p=="submit"||p=="image")&&c.form&&c.form.clk!=c||q=="select"&&c.selectedIndex==-1)){return null}if(q=="select"){var k=c.selectedIndex;if(k<0){return null}var m=[],d=c.options;var g=(p=="select-one");var l=(g?k+1:d.length);for(var f=(g?k:0);f<l;f++){var h=d[f];if(h.selected){var o=h.value;if(!o){o=(h.attributes&&h.attributes.value&&!(h.attributes.value.specified))?h.text:h.value}if(g){return o}m.push(o)}}return m}return b(c).val()};b.fn.clearForm=function(c){return this.each(function(){b("input,select,textarea",this).clearFields(c)})};b.fn.clearFields=b.fn.clearInputs=function(c){var d=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var f=this.type,e=this.tagName.toLowerCase();if(d.test(f)||e=="textarea"||(c&&/hidden/.test(f))){this.value=""}else{if(f=="checkbox"||f=="radio"){this.checked=false}else{if(e=="select"){this.selectedIndex=-1}}}})};b.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};b.fn.enable=function(c){if(c===undefined){c=true}return this.each(function(){this.disabled=!c})};b.fn.selected=function(c){if(c===undefined){c=true}return this.each(function(){var d=this.type;if(d=="checkbox"||d=="radio"){this.checked=c}else{if(this.tagName.toLowerCase()=="option"){var e=b(this).parent("select");if(c&&e[0]&&e[0].type=="select-one"){e.find("option").selected(false)}this.selected=c}}})};b.fn.ajaxSubmit.debug=false;function a(){if(!b.fn.ajaxSubmit.debug){return}var c="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(c)}else{if(window.opera&&window.opera.postError){window.opera.postError(c)}}}})(jQuery);
(function(a){a.extend(a.fn,{validate:function(b){if(!this.length){b&&b.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return}var c=a.data(this[0],"validator");if(c){return c}this.attr("novalidate","novalidate");c=new a.validator(b,this[0]);a.data(this[0],"validator",c);if(c.settings.onsubmit){var d=this.find("input, button");d.filter(".cancel").click(function(){c.cancelSubmit=true});if(c.settings.submitHandler){d.filter(":submit").click(function(){c.submitButton=this})}this.submit(function(e){if(c.settings.debug){e.preventDefault()}function f(){if(c.settings.submitHandler){if(c.submitButton){var g=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(c.submitButton.value).appendTo(c.currentForm)}c.settings.submitHandler.call(c,c.currentForm);if(c.submitButton){g.remove()}return false}return true}if(c.cancelSubmit){c.cancelSubmit=false;return f()}if(c.form()){if(c.pendingRequest){c.formSubmitted=true;return false}return f()}else{c.focusInvalid();return false}})}return c},valid:function(){if(a(this[0]).is("form")){return this.validate().form()}else{var c=true;var b=a(this[0].form).validate();this.each(function(){c&=b.element(this)});return c}},removeAttrs:function(d){var b={},c=this;a.each(d.split(/\s/),function(e,f){b[f]=c.attr(f);c.removeAttr(f)});return b},rules:function(e,b){var g=this[0];if(e){var d=a.data(g.form,"validator").settings;var i=d.rules;var j=a.validator.staticRules(g);switch(e){case"add":a.extend(j,a.validator.normalizeRule(b));i[g.name]=j;if(b.messages){d.messages[g.name]=a.extend(d.messages[g.name],b.messages)}break;case"remove":if(!b){delete i[g.name];return j}var h={};a.each(b.split(/\s/),function(k,l){h[l]=j[l];delete j[l]});return h}}var f=a.validator.normalizeRules(a.extend({},a.validator.metadataRules(g),a.validator.classRules(g),a.validator.attributeRules(g),a.validator.staticRules(g)),g);if(f.required){var c=f.required;delete f.required;f=a.extend({required:c},f)}return f}});a.extend(a.expr[":"],{blank:function(b){return !a.trim(""+b.value)},filled:function(b){return !!a.trim(""+b.value)},unchecked:function(b){return !b.checked}});a.validator=function(b,c){this.settings=a.extend(true,{},a.validator.defaults,b);this.currentForm=c;this.init()};a.validator.format=function(b,c){if(arguments.length==1){return function(){var d=a.makeArray(arguments);d.unshift(b);return a.validator.format.apply(this,d)}}if(arguments.length>2&&c.constructor!=Array){c=a.makeArray(arguments).slice(1)}if(c.constructor!=Array){c=[c]}a.each(c,function(d,e){b=b.replace(new RegExp("\\{"+d+"\\}","g"),e)});return b};a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:true,ignore:":hidden",ignoreTitle:false,onfocusin:function(b,c){this.lastActive=b;if(this.settings.focusCleanup&&!this.blockFocusCleanup){this.settings.unhighlight&&this.settings.unhighlight.call(this,b,this.settings.errorClass,this.settings.validClass);this.addWrapper(this.errorsFor(b)).hide()}},onfocusout:function(b,c){if(!this.checkable(b)&&(b.name in this.submitted||!this.optional(b))){this.element(b)}},onkeyup:function(b,c){if(b.name in this.submitted||b==this.lastElement){this.element(b)}},onclick:function(b,c){if(b.name in this.submitted){this.element(b)}else{if(b.parentNode.name in this.submitted){this.element(b.parentNode)}}},highlight:function(d,b,c){if(d.type==="radio"){this.findByName(d.name).addClass(b).removeClass(c)}else{a(d).addClass(b).removeClass(c)}},unhighlight:function(d,b,c){if(d.type==="radio"){this.findByName(d.name).removeClass(b).addClass(c)}else{a(d).removeClass(b).addClass(c)}}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=a(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm);this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var b=(this.groups={});a.each(this.settings.groups,function(e,f){a.each(f.split(/\s/),function(h,g){b[g]=e})});var d=this.settings.rules;a.each(d,function(e,f){d[e]=a.validator.normalizeRule(f)});function c(g){var f=a.data(this[0].form,"validator"),e="on"+g.type.replace(/^validate/,"");f.settings[e]&&f.settings[e].call(f,this[0],g)}a(this.currentForm).validateDelegate("[type='text'], [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",c).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",c);if(this.settings.invalidHandler){a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)}},form:function(){this.checkForm();a.extend(this.submitted,this.errorMap);this.invalid=a.extend({},this.errorMap);if(!this.valid()){a(this.currentForm).triggerHandler("invalid-form",[this])}this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var b=0,c=(this.currentElements=this.elements());c[b];b++){this.check(c[b])}return this.valid()},element:function(c){c=this.validationTargetFor(this.clean(c));this.lastElement=c;this.prepareElement(c);this.currentElements=a(c);var b=this.check(c);if(b){delete this.invalid[c.name]}else{this.invalid[c.name]=true}if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers)}this.showErrors();return b},showErrors:function(c){if(c){a.extend(this.errorMap,c);this.errorList=[];for(var b in c){this.errorList.push({message:c[b],element:this.findByName(b)[0]})}this.successList=a.grep(this.successList,function(d){return !(d.name in c)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){if(a.fn.resetForm){a(this.currentForm).resetForm()}this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(d){var c=0;for(var b in d){c++}return c},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()==0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid){try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(b){}}},findLastActive:function(){var b=this.lastActive;return b&&a.grep(this.errorList,function(c){return c.element.name==b.name}).length==1&&b},elements:function(){var c=this,b={};return a(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&c.settings.debug&&window.console&&console.error("%o has no name assigned",this);if(this.name in b||!c.objectLength(a(this).rules())){return false}b[this.name]=true;return true})},clean:function(b){return a(b)[0]},errors:function(){return a(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=a([]);this.toHide=a([]);this.currentElements=a([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(b){this.reset();this.toHide=this.errorsFor(b)},check:function(c){c=this.validationTargetFor(this.clean(c));var h=a(c).rules();var d=false;for(var i in h){var g={method:i,parameters:h[i]};try{var b=a.validator.methods[i].call(this,c.value.replace(/\r/g,""),c,g.parameters);if(b=="dependency-mismatch"){d=true;continue}d=false;if(b=="pending"){this.toHide=this.toHide.not(this.errorsFor(c));return}if(!b){this.formatAndAdd(c,g);return false}}catch(f){this.settings.debug&&window.console&&console.log("exception occured when checking element "+c.id+", check the '"+g.method+"' method",f);throw f}}if(d){return}if(this.objectLength(h)){this.successList.push(c)}return true},customMetaMessage:function(b,d){if(!a.metadata){return}var c=this.settings.meta?a(b).metadata()[this.settings.meta]:a(b).metadata();return c&&c.messages&&c.messages[d]},customMessage:function(c,d){var b=this.settings.messages[c];return b&&(b.constructor==String?b:b[d])},findDefined:function(){for(var b=0;b<arguments.length;b++){if(arguments[b]!==undefined){return arguments[b]}}return undefined},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customMetaMessage(b,c),!this.settings.ignoreTitle&&b.title||undefined,a.validator.messages[c],"<strong>Warning: No message defined for "+b.name+"</strong>")},formatAndAdd:function(c,e){var d=this.defaultMessage(c,e.method),b=/\$?\{(\d+)\}/g;if(typeof d=="function"){d=d.call(this,e.parameters,c)}else{if(b.test(d)){d=jQuery.format(d.replace(b,"{$1}"),e.parameters)}}this.errorList.push({message:d,element:c});this.errorMap[c.name]=d;this.submitted[c.name]=d},addWrapper:function(b){if(this.settings.wrapper){b=b.add(b.parent(this.settings.wrapper))}return b},defaultShowErrors:function(){for(var c=0;this.errorList[c];c++){var b=this.errorList[c];this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass);this.showLabel(b.element,b.message)}if(this.errorList.length){this.toShow=this.toShow.add(this.containers)}if(this.settings.success){for(var c=0;this.successList[c];c++){this.showLabel(this.successList[c])}}if(this.settings.unhighlight){for(var c=0,d=this.validElements();d[c];c++){this.settings.unhighlight.call(this,d[c],this.settings.errorClass,this.settings.validClass)}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(c,d){var b=this.errorsFor(c);if(b.length){b.removeClass(this.settings.validClass).addClass(this.settings.errorClass);b.attr("generated")&&b.html(d)}else{b=a("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(c),generated:true}).addClass(this.settings.errorClass).html(d||"");if(this.settings.wrapper){b=b.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()}if(!this.labelContainer.append(b).length){this.settings.errorPlacement?this.settings.errorPlacement(b,a(c)):b.insertAfter(c)}}if(!d&&this.settings.success){b.text("");typeof this.settings.success=="string"?b.addClass(this.settings.success):this.settings.success(b)}this.toShow=this.toShow.add(b)},errorsFor:function(c){var b=this.idOrName(c);return this.errors().filter(function(){return a(this).attr("for")==b})},idOrName:function(b){return this.groups[b.name]||(this.checkable(b)?b.name:b.id||b.name)},validationTargetFor:function(b){if(this.checkable(b)){b=this.findByName(b.name).not(this.settings.ignore)[0]}return b},checkable:function(b){return/radio|checkbox/i.test(b.type)},findByName:function(b){var c=this.currentForm;return a(document.getElementsByName(b)).map(function(d,e){return e.form==c&&e.name==b&&e||null})},getLength:function(c,b){switch(b.nodeName.toLowerCase()){case"select":return a("option:selected",b).length;case"input":if(this.checkable(b)){return this.findByName(b.name).filter(":checked").length}}return c.length},depend:function(c,b){return this.dependTypes[typeof c]?this.dependTypes[typeof c](c,b):true},dependTypes:{"boolean":function(c,b){return c},string:function(c,b){return !!a(c,b.form).length},"function":function(c,b){return c(b)}},optional:function(b){return !a.validator.methods.required.call(this,a.trim(b.value),b)&&"dependency-mismatch"},startRequest:function(b){if(!this.pending[b.name]){this.pendingRequest++;this.pending[b.name]=true}},stopRequest:function(b,c){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0}delete this.pending[b.name];if(c&&this.pendingRequest==0&&this.formSubmitted&&this.form()){a(this.currentForm).submit();this.formSubmitted=false}else{if(!c&&this.pendingRequest==0&&this.formSubmitted){a(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false}}},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:true,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},dateDE:{dateDE:true},number:{number:true},numberDE:{numberDE:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(b,c){b.constructor==String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(c){var d={};var b=a(c).attr("class");b&&a.each(b.split(" "),function(){if(this in a.validator.classRuleSettings){a.extend(d,a.validator.classRuleSettings[this])}});return d},attributeRules:function(c){var e={};var b=a(c);for(var f in a.validator.methods){var d;if(f==="required"&&typeof a.fn.prop==="function"){d=b.prop(f)}else{d=b.attr(f)}if(d){e[f]=d}else{if(b[0].getAttribute("type")===f){e[f]=true}}}if(e.maxlength&&/-1|2147483647|524288/.test(e.maxlength)){delete e.maxlength}return e},metadataRules:function(b){if(!a.metadata){return{}}var c=a.data(b.form,"validator").settings.meta;return c?a(b).metadata()[c]:a(b).metadata()},staticRules:function(c){var d={};var b=a.data(c.form,"validator");if(b.settings.rules){d=a.validator.normalizeRule(b.settings.rules[c.name])||{}}return d},normalizeRules:function(c,b){a.each(c,function(f,e){if(e===false){delete c[f];return}if(e.param||e.depends){var d=true;switch(typeof e.depends){case"string":d=!!a(e.depends,b.form).length;break;case"function":d=e.depends.call(b,b);break}if(d){c[f]=e.param!==undefined?e.param:true}else{delete c[f]}}});a.each(c,function(d,e){c[d]=a.isFunction(e)?e(b):e});a.each(["minlength","maxlength","min","max"],function(){if(c[this]){c[this]=Number(c[this])}});a.each(["rangelength","range"],function(){if(c[this]){c[this]=[Number(c[this][0]),Number(c[this][1])]}});if(a.validator.autoCreateRanges){if(c.min&&c.max){c.range=[c.min,c.max];delete c.min;delete c.max}if(c.minlength&&c.maxlength){c.rangelength=[c.minlength,c.maxlength];delete c.minlength;delete c.maxlength}}if(c.messages){delete c.messages}return c},normalizeRule:function(c){if(typeof c=="string"){var b={};a.each(c.split(/\s/),function(){b[this]=true});c=b}return c},addMethod:function(b,d,c){a.validator.methods[b]=d;a.validator.messages[b]=c!=undefined?c:a.validator.messages[b];if(d.length<3){a.validator.addClassRules(b,a.validator.normalizeRule(b))}},methods:{required:function(c,b,e){if(!this.depend(e,b)){return"dependency-mismatch"}switch(b.nodeName.toLowerCase()){case"select":var d=a(b).val();return d&&d.length>0;case"input":if(this.checkable(b)){return this.getLength(c,b)>0}default:return a.trim(c).length>0}},remote:function(f,c,g){if(this.optional(c)){return"dependency-mismatch"}var d=this.previousValue(c);if(!this.settings.messages[c.name]){this.settings.messages[c.name]={}}d.originalMessage=this.settings.messages[c.name].remote;this.settings.messages[c.name].remote=d.message;g=typeof g=="string"&&{url:g}||g;if(this.pending[c.name]){return"pending"}if(d.old===f){return d.valid}d.old=f;var b=this;this.startRequest(c);var e={};e[c.name]=f;a.ajax(a.extend(true,{url:g,mode:"abort",port:"validate"+c.name,dataType:"json",data:e,success:function(i){b.settings.messages[c.name].remote=d.originalMessage;var k=i===true;if(k){var h=b.formSubmitted;b.prepareElement(c);b.formSubmitted=h;b.successList.push(c);b.showErrors()}else{var l={};var j=i||b.defaultMessage(c,"remote");l[c.name]=d.message=a.isFunction(j)?j(f):j;b.showErrors(l)}d.valid=k;b.stopRequest(c,k)}},g));return"pending"},minlength:function(c,b,d){return this.optional(b)||this.getLength(a.trim(c),b)>=d},maxlength:function(c,b,d){return this.optional(b)||this.getLength(a.trim(c),b)<=d},rangelength:function(d,b,e){var c=this.getLength(a.trim(d),b);return this.optional(b)||(c>=e[0]&&c<=e[1])},min:function(c,b,d){return this.optional(b)||c>=d},max:function(c,b,d){return this.optional(b)||c<=d},range:function(c,b,d){return this.optional(b)||(c>=d[0]&&c<=d[1])},email:function(c,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(c)},url:function(c,b){return this.optional(b)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(c)},date:function(c,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(c))},dateISO:function(c,b){return this.optional(b)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(c)},number:function(c,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(c)},digits:function(c,b){return this.optional(b)||/^\d+$/.test(c)},creditcard:function(f,c){if(this.optional(c)){return"dependency-mismatch"}if(/[^0-9 -]+/.test(f)){return false}var g=0,e=0,b=false;f=f.replace(/\D/g,"");for(var h=f.length-1;h>=0;h--){var d=f.charAt(h);var e=parseInt(d,10);if(b){if((e*=2)>9){e-=9}}g+=e;b=!b}return(g%10)==0},accept:function(c,b,d){d=typeof d=="string"?d.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(b)||c.match(new RegExp(".("+d+")$","i"))},equalTo:function(c,b,e){var d=a(e).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(b).valid()});return c==d.val()}}});a.format=a.validator.format})(jQuery);(function(c){var a={};if(c.ajaxPrefilter){c.ajaxPrefilter(function(f,e,g){var d=f.port;if(f.mode=="abort"){if(a[d]){a[d].abort()}a[d]=g}})}else{var b=c.ajax;c.ajax=function(e){var f=("mode" in e?e:c.ajaxSettings).mode,d=("port" in e?e:c.ajaxSettings).port;if(f=="abort"){if(a[d]){a[d].abort()}return(a[d]=b.apply(this,arguments))}return b.apply(this,arguments)}}})(jQuery);(function(a){if(!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener){a.each({focus:"focusin",blur:"focusout"},function(c,b){a.event.special[b]={setup:function(){this.addEventListener(c,d,true)},teardown:function(){this.removeEventListener(c,d,true)},handler:function(f){arguments[0]=a.event.fix(f);arguments[0].type=b;return a.event.handle.apply(this,arguments)}};function d(f){f=a.event.fix(f);f.type=b;return a.event.handle.call(this,f)}})}a.extend(a.fn,{validateDelegate:function(d,c,b){return this.bind(c,function(e){var f=a(e.target);if(f.is(d)){return b.apply(f,arguments)}})}})})(jQuery);
/*!
 * jQuery blockUI plugin
 * Version 2.39 (23-MAY-2011)
 * @requires jQuery v1.2.3 or later
 *
 * Examples at: http://malsup.com/jquery/block/
 * Copyright (c) 2007-2010 M. Alsup
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Thanks to Amir-Hossein Sobhi for some excellent contributions!
 */
(function(i){if(/1\.(0|1|2)\.(0|1|2)/.test(i.fn.jquery)||/^1.1/.test(i.fn.jquery)){alert("blockUI requires jQuery v1.2.3 or later!  You are using v"+i.fn.jquery);return}i.fn._fadeIn=i.fn.fadeIn;var c=function(){};var j=document.documentMode||0;var e=i.browser.msie&&((i.browser.version<8&&!j)||j<8);var f=i.browser.msie&&/MSIE 6.0/.test(navigator.userAgent)&&!j;i.blockUI=function(p){d(window,p)};i.unblockUI=function(p){h(window,p)};i.growlUI=function(t,r,s,p){var q=i('<div class="growlUI"></div>');if(t){q.append("<h1>"+t+"</h1>")}if(r){q.append("<h2>"+r+"</h2>")}if(s==undefined){s=3000}i.blockUI({message:q,fadeIn:700,fadeOut:1000,centerY:false,timeout:s,showOverlay:false,onUnblock:p,css:i.blockUI.defaults.growlCSS})};i.fn.block=function(p){return this.unblock({fadeOut:0}).each(function(){if(i.css(this,"position")=="static"){this.style.position="relative"}if(i.browser.msie){this.style.zoom=1}d(this,p)})};i.fn.unblock=function(p){return this.each(function(){h(this,p)})};i.blockUI.version=2.39;i.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:true,theme:false,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:0.6,cursor:"wait"},growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:0.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:false,baseZ:1000,centerX:true,centerY:true,allowBodyStretch:true,bindEvents:true,constrainTabKey:true,fadeIn:200,fadeOut:400,timeout:0,showOverlay:true,focusInput:true,applyPlatformOpacityRules:true,onBlock:null,onUnblock:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg"};var b=null;var g=[];function d(r,F){var A=(r==window);var w=F&&F.message!==undefined?F.message:undefined;F=i.extend({},i.blockUI.defaults,F||{});F.overlayCSS=i.extend({},i.blockUI.defaults.overlayCSS,F.overlayCSS||{});var C=i.extend({},i.blockUI.defaults.css,F.css||{});var N=i.extend({},i.blockUI.defaults.themedCSS,F.themedCSS||{});w=w===undefined?F.message:w;if(A&&b){h(window,{fadeOut:0})}if(w&&typeof w!="string"&&(w.parentNode||w.jquery)){var I=w.jquery?w[0]:w;var P={};i(r).data("blockUI.history",P);P.el=I;P.parent=I.parentNode;P.display=I.style.display;P.position=I.style.position;if(P.parent){P.parent.removeChild(I)}}i(r).data("blockUI.onUnblock",F.onUnblock);var B=F.baseZ;var M=(i.browser.msie||F.forceIframe)?i('<iframe class="blockUI" style="z-index:'+(B++)+';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+F.iframeSrc+'"></iframe>'):i('<div class="blockUI" style="display:none"></div>');var L=F.theme?i('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+(B++)+';display:none"></div>'):i('<div class="blockUI blockOverlay" style="z-index:'+(B++)+';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>');var K,G;if(F.theme&&A){G='<div class="blockUI '+F.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(B+10)+';display:none;position:fixed"><div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(F.title||"&nbsp;")+'</div><div class="ui-widget-content ui-dialog-content"></div></div>'}else{if(F.theme){G='<div class="blockUI '+F.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(B+10)+';display:none;position:absolute"><div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(F.title||"&nbsp;")+'</div><div class="ui-widget-content ui-dialog-content"></div></div>'}else{if(A){G='<div class="blockUI '+F.blockMsgClass+' blockPage" style="z-index:'+(B+10)+';display:none;position:fixed"></div>'}else{G='<div class="blockUI '+F.blockMsgClass+' blockElement" style="z-index:'+(B+10)+';display:none;position:absolute"></div>'}}}K=i(G);if(w){if(F.theme){K.css(N);K.addClass("ui-widget-content")}else{K.css(C)}}if(!F.theme&&(!F.applyPlatformOpacityRules||!(i.browser.mozilla&&/Linux/.test(navigator.platform)))){L.css(F.overlayCSS)}L.css("position",A?"fixed":"absolute");if(i.browser.msie||F.forceIframe){M.css("opacity",0)}var y=[M,L,K],O=A?i("body"):i(r);i.each(y,function(){this.appendTo(O)});if(F.theme&&F.draggable&&i.fn.draggable){K.draggable({handle:".ui-dialog-titlebar",cancel:"li"})}var v=e&&(!i.boxModel||i("object,embed",A?null:r).length>0);if(f||v){if(A&&F.allowBodyStretch&&i.boxModel){i("html,body").css("height","100%")}if((f||!i.boxModel)&&!A){var E=m(r,"borderTopWidth"),J=m(r,"borderLeftWidth");var x=E?"(0 - "+E+")":0;var D=J?"(0 - "+J+")":0}i.each([M,L,K],function(t,S){var z=S[0].style;z.position="absolute";if(t<2){A?z.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.boxModel?0:"+F.quirksmodeOffsetHack+') + "px"'):z.setExpression("height",'this.parentNode.offsetHeight + "px"');A?z.setExpression("width",'jQuery.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):z.setExpression("width",'this.parentNode.offsetWidth + "px"');if(D){z.setExpression("left",D)}if(x){z.setExpression("top",x)}}else{if(F.centerY){if(A){z.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"')}z.marginTop=0}else{if(!F.centerY&&A){var Q=(F.css&&F.css.top)?parseInt(F.css.top):0;var R="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+Q+') + "px"';z.setExpression("top",R)}}}})}if(w){if(F.theme){K.find(".ui-widget-content").append(w)}else{K.append(w)}if(w.jquery||w.nodeType){i(w).show()}}if((i.browser.msie||F.forceIframe)&&F.showOverlay){M.show()}if(F.fadeIn){var H=F.onBlock?F.onBlock:c;var q=(F.showOverlay&&!w)?H:c;var p=w?H:c;if(F.showOverlay){L._fadeIn(F.fadeIn,q)}if(w){K._fadeIn(F.fadeIn,p)}}else{if(F.showOverlay){L.show()}if(w){K.show()}if(F.onBlock){F.onBlock()}}l(1,r,F);if(A){b=K[0];g=i(":input:enabled:visible",b);if(F.focusInput){setTimeout(o,20)}}else{a(K[0],F.centerX,F.centerY)}if(F.timeout){var u=setTimeout(function(){A?i.unblockUI(F):i(r).unblock(F)},F.timeout);i(r).data("blockUI.timeout",u)}}function h(s,t){var r=(s==window);var q=i(s);var u=q.data("blockUI.history");var v=q.data("blockUI.timeout");if(v){clearTimeout(v);q.removeData("blockUI.timeout")}t=i.extend({},i.blockUI.defaults,t||{});l(0,s,t);if(t.onUnblock===null){t.onUnblock=q.data("blockUI.onUnblock");q.removeData("blockUI.onUnblock")}var p;if(r){p=i("body").children().filter(".blockUI").add("body > .blockUI")}else{p=i(".blockUI",s)}if(r){b=g=null}if(t.fadeOut){p.fadeOut(t.fadeOut);setTimeout(function(){k(p,u,t,s)},t.fadeOut)}else{k(p,u,t,s)}}function k(p,s,r,q){p.each(function(t,u){if(this.parentNode){this.parentNode.removeChild(this)}});if(s&&s.el){s.el.style.display=s.display;s.el.style.position=s.position;if(s.parent){s.parent.appendChild(s.el)}i(q).removeData("blockUI.history")}if(typeof r.onUnblock=="function"){r.onUnblock(q,r)}}function l(p,t,u){var s=t==window,r=i(t);if(!p&&(s&&!b||!s&&!r.data("blockUI.isBlocked"))){return}if(!s){r.data("blockUI.isBlocked",p)}if(!u.bindEvents||(p&&!u.showOverlay)){return}var q="mousedown mouseup keydown keypress";p?i(document).bind(q,u,n):i(document).unbind(q,n)}function n(t){if(t.keyCode&&t.keyCode==9){if(b&&t.data.constrainTabKey){var r=g;var q=!t.shiftKey&&t.target===r[r.length-1];var p=t.shiftKey&&t.target===r[0];if(q||p){setTimeout(function(){o(p)},10);return false}}}var s=t.data;if(i(t.target).parents("div."+s.blockMsgClass).length>0){return true}return i(t.target).parents().children().filter("div.blockUI").length==0}function o(p){if(!g){return}var q=g[p===true?g.length-1:0];if(q){q.focus()}}function a(w,q,A){var z=w.parentNode,v=w.style;var r=((z.offsetWidth-w.offsetWidth)/2)-m(z,"borderLeftWidth");var u=((z.offsetHeight-w.offsetHeight)/2)-m(z,"borderTopWidth");if(q){v.left=r>0?(r+"px"):"0"}if(A){v.top=u>0?(u+"px"):"0"}}function m(q,r){return parseInt(i.css(q,r))||0}})(jQuery);
/*! Copyright (c) 2010 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version 2.1.2
 */
(function(a){a.fn.bgiframe=(a.browser.msie&&/msie 6\.0/i.test(navigator.userAgent)?function(d){d=a.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:true,src:"javascript:false;"},d);var c='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+d.src+'"style="display:block;position:absolute;z-index:-1;'+(d.opacity!==false?"filter:Alpha(Opacity='0');":"")+"top:"+(d.top=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":b(d.top))+";left:"+(d.left=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":b(d.left))+";width:"+(d.width=="auto"?"expression(this.parentNode.offsetWidth+'px')":b(d.width))+";height:"+(d.height=="auto"?"expression(this.parentNode.offsetHeight+'px')":b(d.height))+';"/>';return this.each(function(){if(a(this).children("iframe.bgiframe").length===0){this.insertBefore(document.createElement(c),this.firstChild)}})}:function(){return this});a.fn.bgIframe=a.fn.bgiframe;function b(c){return c&&c.constructor===Number?c+"px":c}})(jQuery);
(function(a){a.widget("ui.combobox",{_create:function(){var d=this,b=this.element.hide(),e=b.children(":selected"),f=e.val()?e.text():"";var c=this.input=a("<input>").insertAfter(b).val(f).autocomplete({delay:0,minLength:0,source:function(h,g){var i=new RegExp(a.ui.autocomplete.escapeRegex(h.term),"i");g(b.children("option").map(function(){var j=a(this).text();if(this.value&&(!h.term||i.test(j))){return{label:j.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+a.ui.autocomplete.escapeRegex(h.term)+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>"),value:j,option:this}}}))},select:function(g,h){h.item.option.selected=true;d._trigger("selected",g,{item:h.item.option})},change:function(h,i){if(!i.item){var j=new RegExp("^"+a.ui.autocomplete.escapeRegex(a(this).val())+"$","i"),g=false;b.children("option").each(function(){if(a(this).text().match(j)){this.selected=g=true;return false}});if(!g){a(this).val("");b.val("");c.data("autocomplete").term="";return false}}}}).addClass("ui-widget ui-widget-content ui-corner-left");c.data("autocomplete")._renderItem=function(g,h){return a("<li></li>").data("item.autocomplete",h).append("<a>"+h.label+"</a>").appendTo(g)};this.button=a("<button type='button'>&nbsp;</button>").attr("tabIndex",-1).attr("title","Show All Items").insertAfter(c).button({icons:{primary:"ui-icon-triangle-1-s"},text:false}).removeClass("ui-corner-all").addClass("ui-corner-right ui-button-icon").click(function(){if(c.autocomplete("widget").is(":visible")){c.autocomplete("close");return}a(this).blur();c.autocomplete("search","");c.focus()})},destroy:function(){this.input.remove();this.button.remove();this.element.show();a.Widget.prototype.destroy.call(this)}})})(jQuery);
if(!($.format)){$.format=function(a,b){if(arguments.length==1){return function(){var c=$.makeArray(arguments);c.unshift(a);return $.format.apply(this,c)}}if(arguments.length>2&&b.constructor!=Array){b=$.makeArray(arguments).slice(1)}if(b.constructor!=Array){b=[b]}$.each(b,function(c,d){a=a.replace(new RegExp("\\{"+c+"\\}","g"),d)});return a}};
function jshelper(){}jshelper.urlArgs=function(){var b={};var f=location.search.substring(1);var e=f.split("&");for(var c=0;c<e.length;c++){var g=e[c].indexOf("=");if(g==-1){continue}var a=e[c].substring(0,g);var d=e[c].substring(g+1);d=decodeURIComponent(d);b[a]=d}return b};jshelper.generatePassword=function(a){if($(a).length==0){alert("请指定密码文本框对象。");return}ajaxPost(baseUrl+"a1/auth/generatePassword",{},function(b){if(b.success){$(a).val(b.password)}else{alert(b.message||"生成随机密码失败！")}})};jshelper.validateUserName=function(b,c,a){ajaxPost(baseUrl+"a1/auth/validateUserName",{userId:b,userName:c},function(d){if($.isFunction(a)){a(d)}else{alert(d.message||"检查用户是否存在失败！")}})};jshelper.sendPassword=function(f,b,d){d=$.extend({},{dialogTitle:"发送密码",username:null,password:null,data:{email:null,mobile:null}},d);var c="#email_sms_div";var a=$(c);if(a.length>0){a.remove()}a=$("<div id='"+c+"'>正在读取发送内容，请稍后...</div>").appendTo("body");var g={username:d.username,password:d.password};if(d.data){for(var e in d.data){g[e]=d.data[e]}}a.dialog({title:d.dialogTitle,height:320,width:520,modal:true,bgiframe:true,close:function(h,i){if($.isFunction(d.close)){d.close(h,i)}}});a.load(f+"?_="+(new Date().getTime()),g,function(){if(a.find("input[name='btnSend']").length==0){a.html("<span class='error'>读取发送内容失败！</span>");return}else{a.find("textarea").css("width",350).css("height",120);a.find("input[name='btnSend']").button().click(function(){var h=$(this).parents("form:first");h.attr("action",b);ajaxSubmitForm(h,function(i){if(i.success){alert("发送成功。")}else{alert(i.message||"发送失败。")}})})}a.children().tabs()})};
if(jQuery.datepicker){jQuery(function(a){a.datepicker.regional["zh-CN"]={closeText:"关闭",prevText:"&#x3c;上月",nextText:"下月&#x3e;",currentText:"今天",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],weekHeader:"周",dateFormat:"yy/mm/dd",firstDay:1,isRTL:false,showMonthAfterYear:true,showOn:"button",buttonImageOnly:true,changeYear:true,changeMonth:true,yearSuffix:"年&nbsp;"};a.datepicker.setDefaults(a.datepicker.regional["zh-CN"])})};
if(jQuery.validator){jQuery.validator.showFieldError=function(a,b){a.focus();a.addClass("validate-error");alert(b);a.removeClass("validate-error")};jQuery.validator.showError=function(a,c){var b=$("[name='"+a+"']");var e=b.attr("data-label");if(!e){var d=b.attr("id");if(d){e=$("label[for='"+d+"']").text()}}if(e){c=$.trim(e)+"："+c}jQuery.validator.showFieldError(b,c)};jQuery.extend(jQuery.validator.messages,{required:"不能为空",remote:"请修正该字段",email:"请输入正确格式的电子邮件",url:"请输入合法的网址",date:"请输入合法的日期",dateISO:"请输入合法的日期 (ISO).",number:"请输入合法的数字",digits:"只能输入整数",creditcard:"请输入合法的信用卡号",equalTo:"请再次输入相同的值",accept:"请输入拥有合法后缀名的字符串",maxlength:jQuery.validator.format("请输入一个长度最多是 {0} 的字符串"),minlength:jQuery.validator.format("请输入一个长度最少是 {0} 的字符串"),rangelength:jQuery.validator.format("请输入一个长度介于 {0} 和 {1} 之间的字符串"),range:jQuery.validator.format("请输入一个介于 {0} 和 {1} 之间的值"),max:jQuery.validator.format("请输入一个最大为 {0} 的值"),min:jQuery.validator.format("请输入一个最小为 {0} 的值")});jQuery.validator.setDefaults({invalidHandler:function(b,a){$.each(a.invalid,function(c,d){a.invalid={};a.invalid[c]=d;jQuery.validator.showError(c,d);return false})},errorPlacement:function(a,b){},onkeyup:false,onfocusout:false,onsubmit:false});jQuery.validator.addMethod("numeric",function(b,a,c){return this.optional(a)||/^[0-9]*$/.test(b)},"只能输入数字");jQuery.validator.addMethod("required2",function(b,a,d){var e=$.trim($(a).val());var c=$.trim($(d).val());return !(e==""&&c!="")},"不能为空")};
var defaultDialogOptions={width:800,height:600,name:"_blank",resizable:"no"};function openWindow(b){b=b||{};var a=defaultDialogOptions.width;if(b.width){a=b.width>screen.availWidth?screen.availWidth:b.width}var d=defaultDialogOptions.height;if(b.height){d=b.height>screen.availHeight?screen.availHeight:b.height}var e=b.name||defaultDialogOptions.name;resizable=b.resizable||defaultDialogOptions.resizable;var c="height="+d+",width="+a+",resizable="+resizable+",toolbar=no,menubar=no,scrollbars=yes,location=no,status=yes";return window.open(b.url,e,c)}function closeWindow(b){if(!b&&window.canCloseWindow&&!window.canCloseWindow()){return}window.close();try{if(window.opener._currentDialog){window.opener.onDialogClosed()}}catch(a){}}var _currentDialog=null;function showDialog(a,c){$.blockUI({message:null});_currentDialog=$.extend({},{childWnd:null,callback:null,result:null},a);if($.isFunction(c)){_currentDialog.callback=c}_currentDialog.childWnd=openWindow(a);$(".blockOverlay").click(function(){try{if(isChildWndClosed()){onDialogClosed()}else{_currentDialog.childWnd.focus()}}catch(d){onDialogClosed()}});var b=0;_currentDialog.watcher=setInterval(function(){try{if(isChildWndClosed()){b++}else{b=0}}catch(d){b++}if(b>=2){onDialogClosed()}},500)}function isChildWndClosed(){if(!_currentDialog||!(_currentDialog.childWnd)||!(_currentDialog.childWnd.document)){return true}if(_currentDialog.childWnd.closed){return true}return false}function onDialogClosed(){if(_currentDialog&&_currentDialog.watcher){clearInterval(_currentDialog.watcher);_currentDialog.watcher=null}$.unblockUI();if(_currentDialog&&_currentDialog.callback&&_currentDialog.result){_currentDialog.callback.call(_currentDialog,_currentDialog.result)}_currentDialog=null}function setDialogResult(a){if(window.opener&&window.opener._currentDialog){window.opener._currentDialog.result=a}}function closeDialog(a){setDialogResult(a);window.close();try{if(window.opener&&window.opener.onDialogClosed){window.opener.onDialogClosed()}}catch(b){}}function showWaitMessage(a){return $.blockUI({message:a||"正在操作，请稍等...",baseZ:2000,css:{border:"none",padding:"15px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:0.5,color:"#fff","font-size":"16px"}})}function closeWaitMessage(){$.unblockUI()}function ajaxSubmitForm(c,b,a){if($.isFunction(b)){b={response:b}}else{b=b||{}}if(a){b.dataType=a=="myhtml"?"html":a}b.beforeSubmit=function(){showWaitMessage(b.waitMsg);if(b.onSubmiting){b.onSubmiting()}return true};b.success=function(){if(b.response){if(a=="myhtml"){var d=arguments[0];if(d&&d.indexOf("<!--success-->")>0){b.response.apply(b,[{success:true,html:d}])}else{var e=d&&d.indexOf("<!--login-->")>=0;b.response.apply(b,[{success:false,message:e?"登录超时，需要重新登录。":"您请求的操作执行失败。",html:d}])}}else{b.response.apply(b,arguments)}}};b.error=function(){var d=false;if(arguments[0]&&arguments[0].responseText){if(arguments[0].responseText.indexOf("<!--login-->")>=0){d=true}}if(b.response){if(b.dataType=="json"||a=="myhtml"){b.response.apply(b,[{success:false,message:d?"登录超时，需要重新登录。":"您请求的操作执行失败。"}])}else{b.response.apply(b,arguments)}}};$(":text",c).each(function(){var e=$(this).val();var d=trimEnd(e);if(e!=d){$(this).val(d)}});if($(c).hasClass("validate")&&!$(c).validate().form()){return}if(window.onBeforeSubmit&&!onBeforeSubmit($(c))){return}b.dataType=b.dataType||"json";$(c).ajaxSubmit(b)}function ajaxUploadLargeFile(e,c){var a=null;var b=null;var d=0;function f(){if(a){$.ajax({type:"GET",cache:false,global:false,dataType:"json",async:true,url:baseUrl+"a1/auth/getFileUploadProgress",success:function(g){if(a){if(g.success){if(g.progress<0){if(d>0){d=100}}else{d=Math.round(g.progress*100)}a.text(""+d+"%");b.progressbar("value",d)}else{a.text("?")}setTimeout(f,1000)}},error:function(g){if(a){a.text("?");setTimeout(f,1000)}}})}}ajaxSubmitForm(e,{response:function(g){a=null;$(".blockMsg").empty();c(g)},onSubmiting:function(){a=$("<span>0%</span>");b=$("<div></div>").progressbar({value:0});$(".blockMsg").empty().css("opacity",0).css("line-height","20px").append("<span>文件上传进度：</span>").append(a).append(b);setTimeout(f,1000)}})}function ajaxPost(e,f,d,c,a){var b=c=="myhtml";c=c=="myhtml"?"html":c;showWaitMessage(a);$.post(e,f,function(h){if(d){if(b){if(h&&h.indexOf("<!--success-->")>0){d({success:true,html:h})}else{var g=h&&h.indexOf("<!--login-->")>=0;d({success:false,message:g?"登录超时，需要重新登录。":"您请求的操作执行失败。",html:h})}}else{d(h)}}},c).error(function(h){var g=false;if(arguments[0]&&arguments[0].responseText){if(arguments[0].responseText.indexOf("<!--login-->")>=0){g=true}}d({success:false,message:g?"登录超时，需要重新登录。":"您请求的操作执行失败。",html:h})})}function showHelpWindow(a){openWindow({url:a,width:1024,height:800})}function getChildDialogOptions(b){var a={url:b,width:defaultDialogOptions.width,height:defaultDialogOptions.height};var d=b;if(d.length>baseUrl.length&&d.substr(0,baseUrl.length)==baseUrl){d=b.substr(baseUrl.length)}else{if(d.length>baseUrlContext.length&&d.substr(0,baseUrlContext.length)==baseUrlContext){d=b.substr(baseUrlContext.length)}}if(d.indexOf("?")>-1){d=d.substring(0,d.indexOf("?"))}var c=d.split("/");if(c.length==3){if(c[1]=="prj"||c[1]=="apply"||c[0]=="persons"){a.width=900;a.height=800;if(c[2]=="edit"||c[2]=="add"){a.width=1024}}else{if(c[1]=="exp"){if(c[2]=="edit"){a.width=900;a.height=800}else{if(c[2].indexOf("import")==0){a.width=800;a.height=600}else{a.height=640}}}}}else{if(c.length==2){if(c[1]=="art"){a.height=800}}}return a}function showChildDialog(a,b){showDialog(getChildDialogOptions(a),b)};
var myui={};myui.paging={};myui.paging.settings={curPrevPageCnt:1,curNextPageCnt:2,firstPageCnt:1,lastPageCnt:1,pagingCssName:"paging",summaryCssName:"paging-summary",count:0,pageCount:0,pageNumber:1,summary:"[总数:{count}] [页码:{pageNumber}/{pageCount}]&nbsp;&nbsp;&nbsp;",changePage:"changePage"};myui.paging.createPaging=function(k){k=$.extend([],myui.paging.settings,k);var a=k.firstPageCnt+k.curPrevPageCnt+1;var j=k.lastPageCnt+k.curNextPageCnt+1;var e=a+j+1;var b=[];var f=1;if(k.pageNumber>a+1&&k.pageCount>e){while(f<=k.firstPageCnt){b.push(f);f++}b.push("...");f=k.pageNumber-k.curPrevPageCnt;var g=k.pageCount+1-(e-b.length);if(f>g){f=g}}while(f<=k.pageNumber){b.push(f);f++}if(k.pageCount-k.pageNumber<=j||k.pageCount<=e){while(f<=k.pageCount){b.push(f);f++}}else{while(b.length<e-2){b.push(f);f++}b.push("...");b.push(k.pageCount)}var c=function(i,l){if(!l){l=i}return $.format('<a href="javascript:void(0)" onclick="javascript:{0}({1},\'{2}\')">{3}</a>',k.changePage,i,k.name,l)};var h=[];if(k.pageNumber==1){h.push('<span class="disabled">上一页</span>')}else{h.push(c(k.pageNumber-1,"上一页"))}for(var d=0;d<b.length;d++){if(b[d]=="..."){h.push(b[d])}else{if(b[d]==k.pageNumber){h.push($.format('<span class="current">{0}</span>',b[d]))}else{h.push(c(b[d]))}}}if(k.pageNumber<k.pageCount){h.push(c(k.pageNumber+1,"下一页"))}else{h.push('<span class="disabled">下一页</span>')}return $.format('<div class="{0}">{1}</div>',k.pagingCssName,h.join(""))};myui.paging.createSummary=function(b){b=$.extend([],myui.paging.settings,b);if(!b.summary){return""}var a=b.summary.replace("{count}",b.count);a=a.replace("{pageCount}",b.pageCount);a=a.replace("{pageNumber}",b.pageNumber);return $.format('<div class="{0}">{1}</div>',b.summaryCssName,a)};
(function(a){a.fn.extend({listInput:function(k){k=a.extend({},{initialRowCnt:1,maxRowCnt:10},k);var c=a(this);var f=null;c.find("tbody>tr").live("click",function(){if(f!=null){f.removeClass("current_row")}f=a(this);f.addClass("current_row")});var i=function(q){var n=c.find("tbody>tr");var m=a("<input type='hidden' name='_$_old_name'>").appendTo("body").attr("name","_$_new_name");var r=m.wrap("<div>").parent().html().indexOf("_$_new_name")>0;m.parent().remove();for(var p=q,l=n.length;p<l;p++){var o=a(n[p]).find("input[name],select[name]");o.each(function(){var u=a(this).attr("name");var t=u;var v=t.lastIndexOf(".");var s=t.lastIndexOf("[");if(s>v){t=t.substring(0,s)}if(v<0){t=t+"["+p+"]"}else{var w=t.substring(0,v);if(w.charAt(w.length-1)=="]"){s=w.lastIndexOf("[");w=w.substring(0,s)}t=w+"["+p+"]"+t.substr(v)}if(u!=t){if(r){a(this).attr("name",t)}else{$p=a(this).wrap("<div>").parent();$p.html($p.html().replace(u,t));$p.children(":first").unwrap()}}})}};var j=function(l){l.removeClass("current_row").find("input").val("").removeAttr("checked");l.find("select").each(function(){a(this).find("option[selected]").removeAttr("selected");var m=a(this).parent().html();if(m.indexOf('selected=""')>0){a(this).parent().html(m.replace('selected=""',""))}})};var d=function(m,l){if(l){i(c.find("tbody>tr").index(m))}c.find("tbody>tr").removeClass("odd").filter(":odd").addClass("odd")};var e=function(m,l){if(l){i(m)}c.find("tbody>tr").removeClass("odd").filter(":odd").addClass("odd")};c.find("tbody").find("input").removeAttr("id");var h=c.find("tbody>tr:first").clone(false);j(h,false);var b=function(n){var m=c.find("tbody>tr");if(m.length>=k.maxRowCnt){alert("已达到最大行数限制！");return null}var l=h.clone(false).insertAfter(m.filter("tbody>tr:last"));d(l,n);return l};var g=c.find("tbody>tr").length;while(g<k.initialRowCnt){g++;b(false)}i(0);c.find("tbody>tr").filter(":odd").addClass("odd");return{addRow:function(l){return b(l)},insertRow:function(m){if(f==null){alert("请指定插入行的位置。");return}if(c.find("tbody>tr").length>=k.maxRowCnt){alert("已达到最大行数限制！");return}var l=h.clone(false).insertBefore(f);d(l,m);return l},deleteRow:function(m){if(f==null){alert("请选择要删除的行。");return}if(c.find("tbody>tr").length==1){alert("不能删除唯一的行。");return}var l=c.find("tbody>tr").index(f);f.remove();f=null;e(l,m);return l},resetInputName:function(){i(0);return this},rowCount:function(){return c.find("tbody>tr").length}}}})})(jQuery);
function getGridByGridName(b){if(typeof(b)=="string"){var a=$("#"+b+"ListTable");if(a.length==0){a=$("#"+b)}return a}return b}function gridSelectAll(a){$grid=getGridByGridName(a);var b=$grid.find("tbody").find("td.selected").find(":checkbox");if(b.filter(":checked").length==b.length){b.each(function(){$(this).attr("checked",false)})}else{b.each(function(){$(this).attr("checked",true)})}}function getGridFunc(a,c){var b=window["grid-"+a];if(!b){return null}if($.isFunction(b[c])){return b[c]}else{return null}}function gridChangePage(b,a){var c=getGridFunc(a,"changePage");if(c!=null){c(b)}else{alert($.format("table({0}) changePage {1}",a,b))}}function gridSortBy(c,b,a){var d=getGridFunc(a,"sortBy");if(d!=null){d(c,b)}else{alert($.format("table({0}) sort by {1},{2}",a,c,b?"asc":"desc"))}}function gridRowClick(d,b,a){var c=getGridFunc(a,"rowClick");if(c!=null){c(d,b)}else{alert($.format("table({0}) row key({1}) action({2})",a,b,d))}}var _jsGridActions={edit:{title:"编辑"},"delete":{title:"删除"},print:{title:"打印"},runas:{title:"以该用户身份运行"}};(function(a){var b={createSelectableTd:function(c,d){if(typeof(d)==="undefined"){var e=a.format("javascript:gridSelectAll('{0}');return false;",c);return a.format("<td class='selected'><a href='javascript:void(0)' onclick=\"{0}\" title='全选/反选'><div class='select_all'></div></td>",e)}else{return a.format("<td class='selected'><input name='{0}Key' type='checkbox' value='{1}'/></td>",c,d)}},createNoTd:function(c){if(typeof(c)==="undefined"){return"<td class='no'></td>"}else{return a.format("<td class='no'>{0}</td>",c+1)}},createOrder:function(c,h,e){var d=e.split(",");var i=(d.length===2)&&(d[1]==="asc");var g="";if(d.length==2){g=i?"asc":"desc"}var f=a.format("javascript:gridSortBy('{0}',{1},'{2}');return false;",d[0],i?"false":"true",c);$a=a(a.format("<a href='javascript:void(0)' title='排序' onclick=\"{0}\"></a>",f));$a.append(a("<div class='sortable "+g+"'></div>").text(h));return $a},createDetailLink:function(f,d,c){var e=a.format("javascript:gridRowClick('detail','{0}','{1}');return false;",d,c);return a(a.format("<a href='javascript:void(0)' title='详情' onclick=\"{0}\"></a>",e)).text(f)},createAction:function(e,n,f){var l=a("<div>").addClass("action");for(var g=0,h=e.length;g<h;g++){var j=_jsGridActions[e[g]];var d=a.format("javascript:gridRowClick('{0}','{1}','{2}');return false;",e[g],n,f);var m=j?j.title:e[g];var o=j?j.text:null;var k=(j&&j.image)?j.image:e[g]+".gif";var c="";if(o){c=o}else{c="<img title='"+m+"'  src=\""+baseUrl+"images/actions/"+k+'"/>'}l.append((g>0?"&nbsp;":"")+"<a href='javascript:void(0)' onclick=\""+d+" title='"+m+"' \">"+c+"</a>")}return l},createPaging:function(e,f,d,c){return myui.paging.createPaging({name:c,count:e,pageCount:f,pageNumber:d,changePage:"gridChangePage"})},createPagingSummary:function(e,f,d,c){return myui.paging.createSummary({name:c,count:e,pageCount:f,pageNumber:d,changePage:"gridChangePage"})}};a.fn.extend({gridTable:function(c,e){e=a.extend({chkCol:true,numCol:false,debug:false},e);delete e.currentRow;var d=0;a(this).find("thead").find("tr").each(function(){if(e.chkCol){a(this).prepend(b.createSelectableTd(c))}if(e.numCol){a(this).prepend(b.createNoTd())}a(this).find("td").each(function(){var g=a(this).attr("data-order");if(g){var h=a.trim(a(this).text());a(this).empty().append(b.createOrder(c,h,g))}a(this).attr("nowrap","nowrap")});d=a(this).find("td").length});a(this).find("tbody").find("tr").each(function(h,j){var g=a(this).attr("data-key");if(g==e.currentRowDataKey){e.currentRow=a(this);e.currentRow.addClass(e.currentRowClass);delete e.currentRowDataKey}if(e.chkCol){a(this).prepend(b.createSelectableTd(c,g))}if(e.numCol){a(this).prepend(b.createNoTd(h))}if(h%2==1){a(this).addClass("odd")}a(this).find("td").each(function(){if(a(this).hasClass("action")){var m=a.trim(a(this).text()).split(",");var o=[];for(var l=0,k=m.length;l<k;l++){if(m[l]){o.push(m[l])}}if(o.length>0){a(this).empty().append(b.createAction(o,g,c));a(this).attr("nowrap","nowrap")}else{a(this).empty()}}else{if(a(this).hasClass("detail")){var n=a.trim(a(this).text());a(this).empty().append(b.createDetailLink(n,g,c))}}})});a(this).find("tfoot").find("tr").each(function(h,k){$td=a(this).find("td");if($td.length==1){$td.attr("colspan",d)}$container=$td.find(".paging_container");var j=a.trim($container.text());if(j){var g=j.split(",");if(g.length==3){$container.empty();$container.append(b.createPagingSummary(parseInt(g[0]),parseInt(g[1]),parseInt(g[2]),c));$container.append(b.createPaging(parseInt(g[0]),parseInt(g[1]),parseInt(g[2]),c))}else{alert("paging is invalid:"+paging)}}});if(e.debug){var f=a("#log");if(f.length==1){f.remove()}a("<textarea id='log' cols=100 rows=30></textarea>").val(a(this).html()).appendTo("body")}if(e.currentRowClass){a(this).find("tbody>tr").bind("click",function(){if(e.currentRow){e.currentRow.removeClass(e.currentRowClass)}e.currentRow=a(this);e.currentRow.addClass(e.currentRowClass)})}return e}})})(jQuery);function buildListPage(e,f,d){d=$.extend({searchForm:$.format("#{0}SearchForm",e),listHeader:$.format("#{0}ListHeader",e),listTable:$.format("#{0}ListTable",e),searchUrl:null,debug:false},d);d.name=e;d.title=f;delete d.currentRow;var b=$(d.searchForm);d.searchForm=b.length==1?b:null;var c=$(d.listTable);d.listTable=c.length==1?c:null;var a=$(d.listHeader);d.listHeader=a.length==1?a:null;if(!d.listTable){alert("not found list table");return}d.setListHeaderPaging=function(){if(d.listHeader){var g=$(".paging_container",d.listHeader);if(g.length==0){g=$("<div class='paging_container'></div>");d.listHeader.prepend(g)}g.html($(".paging_container",d.listTable).html())}};d.setResultHtml=function(h){var g=$(h);d.listTable.replaceWith(g);d.listTable=g;d.listTable.gridTable(d.name,d.listOptions);d.setListHeaderPaging()};d.listOptions=d.listTable.gridTable(e,d.listOptions);d.setListHeaderPaging();if(d.searchForm){d.saveSearchCond=function(){d.cond={};var g=d.searchForm.formToArray();for(var h=0;h<g.length;h++){d.cond[g[h].name]=g[h].value}};$(".btn-search",d.searchForm).click(function(){if(d.beforeSearch&&!d.beforeSearch(d.searchForm)){return false}ajaxSubmitForm(d.searchForm,function(g){if(g.success){d.setResultHtml(g.html);d.saveSearchCond();if(d.listLoad){d.listLoad(d)}}else{alert($.format("{0}查询失败！",d.title))}},"myhtml")});d.searchUrl=d.searchForm.attr("action");d.saveSearchCond()}d.research=function(h,g){ajaxPost(d.searchUrl,h,function(i){if(i.success){d.setResultHtml(i.html);d.cond=h;if(d.listLoad){d.listLoad(d)}if($.isFunction(g)){g(i)}}else{alert($.format("{0}查询失败！",d.title));if($.isFunction(g)){g(i)}}},"myhtml")};window["grid-"+e]={changePage:function(h){var g=$.extend({},d.cond);g["pageNo"]=h-1;d.research(g)},sortBy:function(h,g){var i=$.extend({},d.cond);i["cond.order.columnName"]=h;i["cond.order.ascending"]=g;i["pageNo"]=0;d.research(i)},refresh:function(g,h,i){if(d.listOptions.currentRow){d.listOptions.currentRowDataKey=d.listOptions.currentRow.attr("data-key")}if(g){d.searchUrl=g;return d.research(i,h)}else{return d.research(d.cond,h)}},getSelectedKeys:function(){var g=[];d.listTable.find("td.selected").find(":checked").each(function(){g.push($(this).val())});return g},getQuery:function(){return $.extend({},d.cond)}};return window["grid-"+e]};
(function(){function a(b){this.settings=$.extend(null,{calendarImage:(baseUrl||"/")+"images/calendar.gif",requiredImage:(baseUrl||"/")+"images/required.gif",context:$("body"),initParams:[]},b);function c(d,g,e){if(g.length>0){if($.inArray("required",g)>=0){var f="<img src='"+e.requiredImage+"' title='必须' />";d.find(".required").after(f)}if($.inArray("date",g)>=0){d.find("input.date").each(function(){var h={buttonImage:e.calendarImage};var i=$(this).attr("data-year-range");if(i){h.yearRange=i}$(this).datepicker(h)})}}}this.init=function(f){f=f||this.settings.initParams;this.settings.initParams=f;var d=this.settings.context;var e=[];if($.isArray(f)){e=f}else{if(typeof(f)==="String"){e=[f]}}c(d,e,this.settings);return this};this.reinit=function(d){var e=d?$(d):this.settings.context;c(e,this.settings.initParams,this.settings);return this};this.getElements=function(){return this.settings.context.find("input, select, textarea").not(":submit, :reset, :image, :button, [disabled]").not(this.settings.ignore)};this.acceptChange=function(){var e=this.getElements().toArray();this.settings.elements=e;for(var f=0,d=e.length;f<d;f++){$(e[f]).attr("data-old-value",$(e[f]).val())}return this};this.isChanged=function(){var e=this.getElements().toArray();if(!this.settings.elements||e.length!=this.settings.elements.length){if(this.settings.debug){var g=this.settings.elements;var h=e;if(g.length>h.length){g=e;h=this.settings.elements}for(var f=0,d=g.length;f<d;f++){if(g[f]!=h[f]){alert("id="+$(g[f]).attr("id")+",name="+$(g[f]).attr("name"));break}}}return true}for(var f=0,d=e.length;f<d;f++){if(e[f]!==this.settings.elements[f]){return true}if($(e[f]).val()!=$(e[f]).attr("data-old-value")){return true}}return false};if(this.settings.initParams){this.init(this.settings.initParams)}return this}if(!jshelper){jshelper={}}jshelper.inputHelper=function(b){return new a(b)}})();(function(a){a.fn.extend({inputHelper:function(b){if(!this.length){alert("inputHelper : nothing selected.");return}b=b||{};b.context=this;return jshelper.inputHelper(b)}})})(jQuery);
function getCurrentUrlInfo(){return parseUrl(location.href)}function parseUrl(b){var a=b.indexOf("?");var g={};var f=b;if(a>0){f=b.substring(0,a);var d=b.substring(a+1).split("&");for(var c=0;c<d.length;c++){var e=d[c].split("=");g[e[0]]=e[1]}}return{url:f,params:g}}function refreshCurrentPage(){var a=getCurrentUrlInfo();a.params._=(new Date()).getTime();location.href=a.url+"?"+$.param(a.params)}function trimEnd(a){if(!a){return""}return a.replace(/[ \s]+$/g,"")}function makeArrayParams(d,b){var c=[];for(var e=0,a=b.length;e<a;e++){c.push({name:d,value:b[e]})}return c}function logout(a){if(confirm("您确定要退出系统吗？")){location.href=a}return false}function initailizeInput(b,c){var a=$(c||"body");var e=[];if($.isArray(b)){e=b}else{if(typeof(b)==="String"){e=[b]}}if($.inArray("date",e)>=0){a.find("input.date").each(function(){var f={buttonImage:baseUrl+"images/calendar.gif"};var g=$(this).attr("data-year-range");if(g){f.yearRange=g}$(this).datepicker(f)})}if($.inArray("required",e)>=0){var d="<img src='"+baseUrl+"images/required.gif' title='必须' />";a.find("input.required,select.required").after(d)}}function postToSelfPage(a,b){postToTarget(a,b,"_self")}function postToTarget(a,d,c){c=c||"_self";$form=$("<form method='post' action='"+a+"' target='"+c+"'></form>").appendTo("body");for(var b in d){$("<input type='hidden'></input>").attr("name",b).val(d[b]).appendTo($form)}$form.submit();$form.remove()};
_jsGridActions={edit:{title:"编辑"},"delete":{title:"删除"},shangbao:{title:"上报申报材料，上报后不能再编辑"},vote:{text:"审核"},audit1:{text:"形审"},audit2:{text:"复审"},suborg:{title:"下级机构"},"apply-unit":{title:"申报单位"},"edit-apply-user":{title:"修改申报人个人账号"},print:{title:"打印"},"review-setting":{title:"评审设置"},"review-result":{title:"评审结果",image:"detail.gif"},"recover-wait-review2":{text:"取回"},"recover-wait-xingshen":{text:"取回"},"edit-apply":{text:"编辑"},runas:{title:"以该用户身份运行"},"edit-zdgj-applicant":{title:"编辑该专家重点关注的申报人"},detail:{title:"详情"},"delete-applicant":{text:"删除"},"copy-applicant":{title:"复制申报人信息到当前批次"},"clear-score":{title:"清除专家评分"},"recover-expert-reviewing":{title:"撤回到‘评审中’状态",image:"recover.gif"},"expert-mark":{text:"评分"},"expert-review":{text:"点评"},"audit3-reject":{title:"评审不通过",image:"reject.gif"},"audit3-approved":{title:"评审通过",image:"approve.gif"},"applicant-export-expert":{title:"导出申报人到专家库",image:"export2expert.gif"},"remove-applicant":{title:"移去申报人",image:"remove.gif"},"remove-expert":{title:"移去评审专家",image:"remove.gif"},"detail-score":{title:"评分详情",image:"score.gif"},"recover-group-reviewing":{title:"撤回到‘评审中’状态",image:"recover.gif"}};
